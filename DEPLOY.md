# Инструкция по деплою сайта на хостинг

Этот проект можно задеплоить на различные платформы. Ниже описаны варианты для популярных хостингов.

## Вариант 1: Railway (Рекомендуется)

Railway - простой и быстрый способ задеплоить Flask приложение.

### Шаги:

1. **Зарегистрируйтесь на Railway**
   - Перейдите на https://railway.app
   - Войдите через GitHub

2. **Создайте новый проект**
   - Нажмите "New Project"
   - Выберите "Deploy from GitHub repo"
   - Выберите ваш репозиторий

3. **Настройте переменные окружения**
   - В настройках проекта добавьте переменные из `ton.env`:
     - `BOT_TOKEN` - токен Telegram бота
     - `SUPABASE_URL` - URL Supabase
     - `SUPABASE_KEY` - ключ Supabase
     - `ADMIN_ID` - ID администратора
     - `BOT_USERNAME` - username бота (опционально)

4. **Railway автоматически определит проект**
   - Railway увидит `Procfile` и `requirements.txt`
   - Приложение запустится автоматически

5. **Получите URL**
   - После деплоя Railway выдаст URL вида: `https://ваш-проект.up.railway.app`
   - Этот URL будет работать с HTTPS

6. **Настройте домен в BotFather**
   - Откройте @BotFather в Telegram
   - Bot Settings → Domain
   - Введите ваш домен (без `https://`)

---

## Вариант 2: Render

Render - альтернатива Railway с бесплатным тарифом.

### Шаги:

1. **Зарегистрируйтесь на Render**
   - Перейдите на https://render.com
   - Войдите через GitHub

2. **Создайте новый Web Service**
   - Нажмите "New +" → "Web Service"
   - Подключите ваш GitHub репозиторий

3. **Настройте сервис**
   - **Name**: любое имя
   - **Environment**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn api_server:app --bind 0.0.0.0:$PORT`
   - **Root Directory**: оставьте пустым (файлы в корне)

4. **Добавьте переменные окружения**
   - В разделе "Environment" добавьте переменные из `ton.env`

5. **Деплой**
   - Нажмите "Create Web Service"
   - Render автоматически задеплоит проект

---

## Важные замечания

1. **База данных**: SQLite файл `godvis_messages.db` будет создаваться автоматически при первом запуске. На Railway/Render он будет храниться в файловой системе контейнера (может теряться при перезапуске). Для продакшена лучше использовать PostgreSQL.

2. **Переменные окружения**: Убедитесь, что все необходимые переменные из `ton.env` добавлены в настройки хостинга.

3. **CORS**: В `api_server.py` настроен CORS для работы с любыми доменами. Если нужно ограничить доступ, измените настройки в функции `add_cors_headers`.

4. **Telegram Widget**: Виджет Telegram требует HTTPS. Убедитесь, что ваш сайт доступен по HTTPS.

5. **Проверка работы**: После деплоя откройте ваш сайт в браузере. Вы должны увидеть страницу входа через Telegram.
