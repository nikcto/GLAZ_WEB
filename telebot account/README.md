# Telegram Bot для отслеживания удаленных сообщений

Этот бот работает напрямую с вашим аккаунтом Telegram через Telethon и отслеживает удаленные сообщения, отправляя их вам через клиент бота.

## Особенности

- ✅ Работает напрямую с аккаунтом (не требует бизнес-подключения)
- ✅ Авторизация через номер телефона, код из SMS и пароль 2FA
- ✅ Отслеживание всех удаленных сообщений в вашем аккаунте
- ✅ Сохранение медиафайлов (фото, видео, документы, голосовые и т.д.)
- ✅ Восстановление удаленных сообщений с полным содержимым

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Получите API_ID и API_HASH:
   - Перейдите на https://my.telegram.org/apps
   - Войдите в свой аккаунт
   - Создайте новое приложение
   - Скопируйте `api_id` и `api_hash`

3. Настройте переменные окружения:
   Создайте файл `ton.env` в корне проекта:
```env
BOT_TOKEN=ваш_токен_бота
API_ID=ваш_api_id
API_HASH=ваш_api_hash
```

## Использование

1. Запустите бота:
```bash
python main.py
```

2. Откройте Telegram и найдите вашего бота

3. Отправьте команду `/start`

4. Следуйте инструкциям:
   - Введите номер телефона в формате `+79991234567`
   - Введите код из SMS
   - Если включена 2FA, введите пароль

5. После авторизации бот начнет отслеживать все сообщения в вашем аккаунте

6. При удалении сообщения вы получите уведомление с его содержимым

## Команды

- `/start` - Начать авторизацию
- `/status` - Проверить статус бота
- `/help` - Показать справку

## Как это работает

1. Бот использует Telethon для подключения к вашему аккаунту Telegram
2. Все входящие сообщения сохраняются в базу данных SQLite
3. При удалении сообщения бот получает событие через Telethon
4. Бот восстанавливает содержимое удаленного сообщения из базы данных
5. Уведомление с содержимым отправляется вам через клиент бота

## Структура проекта

```
telebot account/
├── main.py              # Основной файл бота
├── requirements.txt     # Зависимости
├── README.md           # Документация
└── *.session           # Файлы сессий Telethon (создаются автоматически)
```

## Важные замечания

- Файлы сессий (`.session`) содержат данные авторизации - храните их в безопасности
- База данных SQLite (`telebot_account_messages.db`) хранит все сообщения
- Бот работает в фоновом режиме и отслеживает сообщения постоянно
- Для каждого пользователя создается отдельная сессия Telethon

## Отличия от версии в папке Working

- **Working/backapp with pay.py** - работает через бизнес-подключения (Business Connections)
- **telebot account/main.py** - работает напрямую с аккаунтом через Telethon

Версия в `telebot account` не требует настройки бизнес-бота и работает напрямую с вашим аккаунтом.

